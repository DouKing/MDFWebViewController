<!doctype html>
<html><head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf8">
    <title>Demo</title>
    <style type='text/css'>
        html { font-family:Helvetica; color:#222; }
        h1 { color:steelblue; font-size:24px; margin-top:24px; }
        button { margin:0 3px 10px; font-size:12px; }
        .logLine { border-bottom:1px solid #ccc; padding:4px 2px; font-family:courier; font-size:11px; }
    </style><script language="javascript">
        var uniqueId = 1;
        function log(message, data) {
            var log = document.getElementById('log')
            var el = document.createElement('div')
            el.className = 'logLine'
            el.innerHTML = uniqueId++ + '. ' + message + ':<br/>' + JSON.stringify(data)
            if (log.children.length) { log.insertBefore(el, log.children[0]) }
            else { log.appendChild(el) }
        }
        function setRightButtons() {
            var buttons = [{"title":'按钮0'}, {"title":'按钮1'}];
            log('JS calling native method "setButtons"', buttons);
            AppBridge.Page.callMethod('setButtons', buttons, function(index){
                                      var response = '点击了按钮' + index;
                                      log('JS receive native response', response);
                                      });
        }

        registerMethod('showAlert', function(data, callback){
                       var message = JSON.parse(data);
                       log('Native calling js method "showAlert"', message);
                       alert(message.title);
                       callback({key: 'from js', value: 'something'});
                   });
    </script>
</head><body>
    <input type="button" value="Call native method" onclick="setRightButtons()" />
    <div id='log'></div>
</body></html>
